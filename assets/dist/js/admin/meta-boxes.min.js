"use strict";!function(h){var m={admin:pos_host_params,metaBoxes:pos_host_admin_meta_boxes_params},f={states:null,init:function(){void 0!==m.metaBoxes.countries&&(this.states=h.parseJSON(m.metaBoxes.countries.replace(/&quot;/g,'"'))),h(".js_field-country").selectWoo().change(this.change_country),h(".js_field-country").trigger("change",[!0]),h(document.body).on("change","select.js_field-state",this.change_state).on("change","\n\t\t\t\t\t.pos_host_input_email[type=text],\n\t\t\t\t\t.pos_host_input_phone[type=text],\n\t\t\t\t\t.pos_host_input_fax[type=text],\n\t\t\t\t\t.pos_host_input_url[type=text]",this.validate).on("pos_host_add_error_tip",this.addErrorTip).on("pos_host_remove_error_tip",this.removeErrorTip).on("click","#use-store-address",this.useStoreAddress)},change_country:function(t,e){var s,a,o,r,i,n,_,c,p,d,l,u;void 0===e&&(e=!1),null!==f.states&&(a=(s=h(this)).val(),r=(o=s.parents(".postbox").find(":input.js_field-state")).parent(),i=o.attr("name"),n=o.attr("id"),_="woocommerce.stickState-"+a,c=s.data(_)?s.data(_):o.val(),p=o.attr("placeholder"),e&&s.data("woocommerce.stickState-"+a,c),r.show().find(".select2-container").remove(),h.isEmptyObject(f.states[a])?(u=h('<input type="text" />').prop("id",n).prop("name",i).prop("placeholder",p).addClass("js_field-state regular-text").val(c),o.replaceWith(u)):(d=f.states[a],l=h('<option value=""></option>').text(m.metaBoxes.i18n_select_state_text),u=h('<select style="width:50%;"></select>').prop("id",n).prop("name",i).prop("placeholder",p).addClass("js_field-state").append(l),h.each(d,function(t){var e=h("<option></option>").prop("value",t).text(d[t]);u.append(e)}),u.val(c),o.replaceWith(u),u.show().selectWoo().hide().change()),h(document.body).trigger("country-change.woocommerce",[a,h(this).closest("div")]))},change_state:function(){var t=h(this),e=t.val(),s=t.parents(".postbox").find(":input.js_field-country"),a=s.val();s.data("woocommerce.stickState-"+a,e)},validate:function(){var t,e=h(this).val();h(this).is(".pos_host_input_email")&&(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)||(t="i18n_email_error")),(h(this).is(".pos_host_input_phone")||h(this).is(".pos_host_input_fax"))&&(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/g.test(e)||(t=h(this).is(".pos_host_input_fax")?"i18n_fax_error":"i18n_phone_error")),h(this).is(".pos_host_input_url")&&(/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/.test(e)||(t="i18n_url_error")),void 0!==t?(h(document.body).triggerHandler("pos_host_add_error_tip",[h(this),t]),h(this).val("")):h(document.body).triggerHandler("pos_host_remove_error_tip",[h(this),t])},addErrorTip:function(t,e,s){var a=e.position();0===e.parent().find(".wc_error_tip").length&&(e.after('<div class="wc_error_tip '+s+'">'+m.metaBoxes[s]+"</div>"),e.parent().find(".wc_error_tip").css("left",a.left+e.width()-e.width()/2-h(".wc_error_tip").width()/2).css("top",a.top+e.height()).fadeIn("100"))},removeErrorTip:function(t,e,s){e.parent().find(".wc_error_tip."+s).fadeOut("100",function(){h(this).remove()})},useStoreAddress:function(){var t;return window.confirm(m.metaBoxes.i18n_confirm_use_store_address)&&((t=h("form#post")).find('[name="address_1"]').val(m.metaBoxes.base_address_1),t.find('[name="address_2"]').val(m.metaBoxes.base_address_2),t.find('[name="city"]').val(m.metaBoxes.base_city),t.find('[name="postcode"]').val(m.metaBoxes.base_postcode),t.find('[name="country"]').val(m.metaBoxes.base_country).trigger("change"),t.find('[name="state"]').val(m.metaBoxes.base_state).trigger("change")),!1}};f.init()}(jQuery);